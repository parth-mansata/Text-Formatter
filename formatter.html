<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Text Formatter</title>
      <style>
         body {
         font-family: Arial, sans-serif;
         margin: 0;
         padding: 0;
         background-color: #f4f4f9;
         display: flex;
         justify-content: center;
         align-items: center;
         min-height: 100vh;
         text-align: left;
         }
         .container {
         width: 80%;
         max-width: 800px;
         text-align: left;
         }
         .input-area, .output-area {
         width: 100%;
         min-height: 150px;
         padding: 20px;
         border-radius: 5px;
         border: 1px solid #ccc;
         background-color: white;
         font-family: Arial, sans-serif;
         font-size: 16px;
         white-space: pre-wrap;
         word-wrap: break-word;
         text-align: left;
         margin-bottom: 20px;
         }
         .input-area {
         background-color: #e9f7fd;
         min-height: 200px;
         }
         .output-area {
         background-color: #fff4e6;
         margin-top: 20px;
         border: 2px solid #ff9b00;
         min-height: 150px;
         }
         .button {
         padding: 10px 20px;
         margin-top: 20px;
         background-color: #4CAF50;
         color: white;
         border: none;
         border-radius: 5px;
         cursor: pointer;
         }
         .button:hover {
         background-color: #45a049;
         }
         #format-button {
         background-color: #007BFF;
         }
         #format-button:hover {
         background-color: #0056b3;
         }
         .tab {
         display: inline-block;
         width: 2em;
         }
         .bullet-list {
         list-style-type: none;
         padding-left: 20px;
         }
         .bullet-list li {
         position: relative;
         padding-left: 1.5em;
         }
         .bullet-list li::before {
         content: 'â€¢';
         position: absolute;
         left: 0;
         top: 0;
         }
         .nested-list {
         list-style-type: none;
         padding-left: 30px;
         }
      </style>
   </head>
   <body>
      <div class="container">
         <h1>Text Formatter</h1>
         <div id="inputText" contenteditable="true" class="input-area" placeholder="Paste your text here (supports bold, bullets, etc.)"></div>
         <div style="display: flex; justify-content: space-between;">
            <button class="button" id="format-button" onclick="formatText()">Format Text</button>
            <button class="button" id="copy-button" onclick="copyToClipBoard()">Copy</button>
         </div>
         <div id="outputText" class="output-area"></div>
      </div>
      <script>
         const convertBoldInText = (text) => {
         // Regex to find bold words (either Markdown or HTML)
         const boldPattern = /(\*\*([^\*]+)\*\*|<strong>([^<]+)<\/strong>)/g;
         
         return text.replace(boldPattern, (match, p1, p2, p3) => {
         // Extract bold word from either Markdown or HTML format
         const boldWord = p2 || p3;
         return convertToUnicodeBold(boldWord);
         });
         };
         
         function formatText() {
         let inputText = document.getElementById('inputText').innerHTML;
         console.log(inputText)
         inputText = convertBoldInText(inputText);
         console.log(inputText)
         inputText = inputText.replace(/<\/strong>/g, '').replace(/<p>/g, '').replace(/<strong>/g, '')
         console.log(inputText)
         // Handle Bullet Points (convert list items to bullets and preserve nested indentation)
         let nestedListDepth = 0;
         let result = '';
         let i = 0;
         const pEndString = "</p>"
         const brString = "<br>"
         const ulString = "<ul>"
         const liString = "<li>"
         const ulEndString = "</ul>"
         const liEndString = "</li>"
         while (i < inputText.length) {
         if (inputText.substring(i, i + pEndString.length) === pEndString || inputText.substring(i, i + brString.length) === brString) {
             i+= pEndString.length
             result += '\n'
         } else if (inputText.substring(i, i + ulString.length) === ulString) {
             i+= ulString.length
             nestedListDepth++;
         } else if (inputText.substring(i, i + liString.length) === liString) {
             i+= liString.length;
             result += '\t'.repeat(nestedListDepth) + 'â€¢ ';
         } else if (inputText.substring(i, i + liEndString.length) === liEndString) {
             i+= liEndString.length
             // let endIdx = inputText.indexOf("</li>", i);
             result += '\n';
         } else if (inputText.substring(i, i + ulEndString.length) === ulEndString) {
             i+= ulEndString.length
             nestedListDepth--;
         } else {
             result += inputText[i];
             i++;
         }
         }
         console.log(result)
         inputText = result
         
         // Output formatted text to the output area
         document.getElementById('outputText').innerHTML = inputText;
         }
         
         // Function to convert normal text to bold Unicode characters
         function convertToUnicodeBold(text) {
             const latinBoldMap = {
                 'a': 'ð—®', 'b': 'ð—¯', 'c': 'ð—°', 'd': 'ð—±', 'e': 'ð—²', 'f': 'ð—³', 'g': 'ð—´', 'h': 'ð—µ', 'i': 'ð—¶', 'j': 'ð—·', 'k': 'ð—¸',
                 'l': 'ð—¹', 'm': 'ð—º', 'n': 'ð—»', 'o': 'ð—¼', 'p': 'ð—½', 'q': 'ð—¾', 'r': 'ð—¿', 's': 'ð˜€', 't': 'ð˜', 'u': 'ð˜‚', 'v': 'ð˜ƒ',
                 'w': 'ð˜„', 'x': 'ð˜…', 'y': 'ð˜†', 'z': 'ð˜‡',
                 'A': 'ð—”', 'B': 'ð—•', 'C': 'ð—–', 'D': 'ð——', 'E': 'ð—˜', 'F': 'ð—™', 'G': 'ð—š', 'H': 'ð—›', 'I': 'ð—œ', 'J': 'ð—', 'K': 'ð—ž',
                 'L': 'ð—Ÿ', 'M': 'ð— ', 'N': 'ð—¡', 'O': 'ð—¢', 'P': 'ð—£', 'Q': 'ð—¤', 'R': 'ð—¥', 'S': 'ð—¦', 'T': 'ð—§', 'U': 'ð—¨', 'V': 'ð—©',
                 'W': 'ð—ª', 'X': 'ð—«', 'Y': 'ð—¬', 'Z': 'ð—­',
                 '0': 'ðŸŽ', '1': 'ðŸ', '2': 'ðŸ', '3': 'ðŸ‘', '4': 'ðŸ’', '5': 'ðŸ“', '6': 'ðŸ”', '7': 'ðŸ•', '8': 'ðŸ–', '9': 'ðŸ—'
             };
         
             // Convert each character to bold equivalent
             return text.split('').map(char => latinBoldMap[char] || char).join('');
         }
         // Function to convert normal text to bold Unicode characters
         async function copyToClipBoard() {
         
         const divContent = document.getElementById("outputText").innerText;
         
         try {
         await navigator.clipboard.writeText(divContent);
             document.getElementById('copy-button').innerHTML = 'Copied!'
             setTimeout(()=> {
                 document.getElementById('copy-button').innerHTML = 'Copy'
             
             }, 1500)
         } catch (err) {
         console.error("Failed to copy: ", err);
         }
                 }
      </script>
   </body>
</html>